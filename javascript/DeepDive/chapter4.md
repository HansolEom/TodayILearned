# 4장. 변수
## 4-1. 변수란 무엇인가? 왜 필요한가?
변수는 메모리 공간에 저장된다. 메모리 공간은 데이터를 기억하는 장소이다. 메모리는 데이터를 저장할 수 있는 메모리 셀의 집합체로 셀 하나의 크기는 1바잍트(8비트)이며, 1바이트 단위로 데이터를 저장하거나 읽어 들인다.
각 셀은 고유의 메모리 주소를 갖는다. 메모리 주소는 메모리 공간의 위치를 나타내며 0부터 시작해 메모리의 크기만큼 정수로 표현된다. </br>
데이터는 모두 2진수로 저장되며, 데이터의 종류(숫자, 텍스트, 이미지, 동영상 등)에 상관없이 모두 2진수로 처리된다.
```js
10 + 20
```
10과 20은 메모리 상에 저장된다. 연산의 결과로 생성된 숫자 30도 메모리 상의 임의의 위치에 저장된다. 30을 사용하기 위해서는 메모리상의 주소를 알아야 한다. 하지만 메모리 상의 주소를 그대로 가져다 쓰는것은 매우 위험하다.</br>
시스템이 작동하기 위한 값의 메모리 주소에 접근해 잘못된 값을 넣어 시스템이 다운될수도 있다. 따라서 자바스크립트는 메모리 주소를 개발자가 직접 제어하는것을 허용하지 않는다. 또한, 메모리 주소는 코드가 실행될 때 마다 값이 저장될 메모리 주소가 변경된다.
따러서 메모리 주소를 알수도, 알려주지도 않는다. 메모리 주소를 통해 값에 적근하려는 시도는 올바른 방법이 아니다.</br>
프로그래밍 언어는 기업하고 싶은 값을 메모리에 저장하고, 저장된 값을 읽어 재사용 하기 위해서 변수를 사용한다. ***변수는 하나의 값을 저장하귀 위해 확보한 메모리 공간 자체, 그 메모리 공간을 식별하기 위해 붙인 이름이다. 즉, 값의 위치를 가리키는 상징적인 이름이다.*** 따라서 직접 메모리 주소를 통해 값을 저장하고 참조할 필요가 없고 변수를 통해 값에 접근할 수 있다.</br>
```js
let result = 10 + 20
```
새로운값 30은 메모리 공간에 저장된다. 30을 다시 읽어 들여 사용할 수 있도록 값이 저장된 메모리 공간에 상징적인 이름을 붙인 것이 변수이다. 식별할 수 있는 고유한 이름을 ***변수 이름***이라 하고, 저장된 값을 ***변수 값***이라 한다. 변수값에 저장하는 것을 ***할당***이라 하고, 저장된 값을 읽어 들이는 것을 ***참조***라고 한다. </br>
변수이름은 저장된 값의 의미를 알 수 있어야 한다. 즉, 의미를 파악할 수 있는 변수명은 가독성을 높인다. 
## 4-2. 식별자
식별자는 어떤 값을 구별해 식별할 수 있는 고유한 이름을 말한다. 즉, 변수명은 식별자이다. 변수는 메모상의 값을 기억하는 것이 아니라 메모리 주소를 기억한다. 식별자는 값이 아니라 메모리 주소를 기억한다. 식별자는 변수명에 국한되서 사용하지 않고, 함수, 클래스 등의 이름은 모두 식별자 이다.</br>
식별자인 변수 이름을 통해 메모리 상의 존재하는 변수 값을 시별 할 수 있고, 함수 이름으로 메모리 상의 존재하는 함수를 식별할 수 있다. 메모리 상에 존재하는 어떤 값을 식별할 수 있으면 모두 식별자라 부른다.</br>
변수, 함수, 클래스등의 이름과 같은 식별자는 네이밍 규칙을 준수해야하며, **선언**에 의해 식벽자의 존재를 알린다.
## 4-3. 변수 선언
변수 선언이란, 변수를 생성하는 것을 말한다. 값을 저장하기 위해 메모리 공간을 확보하고 확보된 공간의 주소를 이름과 연결해서 값을 저장할 수 있게 준비하는 것을 말한다. **변수를 사용하려면 반드시 선언이 필요하다. 변수를 선언할 떄는 var, let, const 키워드를 사용한다.** es6 문법이 도입되기 전까지 var이 변수를 선언할 수 있는 유일한 키워드 였다. 
```js
var score
```
다음과 같이 변수 이름을 등록하고, 값을 저장할 메모리 공간을 확보한다. 아직 값을 넣지 않아 메모리 공간은 비어 있다. 자바스크립트 엔진에 의해 undefined라는 값으로 초기화된다. 자바스크립트 엔진은 변수 선언을 다음과 같이 2단계에 거쳐 수행한다.

1. 선언단계: 변수 이름을 등록해서 자바스크립트 엔진에 의해 변수의 존재를 알림
2. 초기화 단계: 값을 저장하기 위해 메모리 공간을 확보하고 암묵적으로 undefined를 할당해 초기화

그렇다면 변수이름은 어디에 저장될까? 변수의 이름은 실행 컨텍스트에 등록된다. 실행 컨텍스트는 엔진이 소스 코드를 평가하고 실행하기 위해 필요한 환경을 제공하고 실행 결과를 관리하는 영역이다. 실행 컨텍스트를 통해 식별자와 스코프를 관리한다.</br>
**var 키워드를 사용해 변수를 선언하면 선언과 초기화가 동시에 일어난다.** 선언 단계를 통해 score를 등록하고, 초기화 단계를 통해 score에 undefined를 할당해 초기화 한다. 만약 선언하지 않은 식별자에 적근하면 ReferenceError가 발생한다. 식별자를 통해 값을 참조하려 했지만 자바스크립트 엔진에 등록된 식별자를 찾을 수 없을때 발생하는 에러이다.
## 4-4. 변수 선언의 실행 시점과 변수 호이스팅
```js
console.log(score)

var score
```
변수 선언보다 변수를 참조하는 코드가 앞에 있다. console.log(score)가 실행되는 시점에서 score의 선언이 일어나지 않았기 때문에 ReferenceError가 발생할 것처럼 보이지만 참조 에러가 발생하지 않고 undefined가 출력된다. **변수 선언이 소스코드가 한 줄씩 실행되는 시점, 즉 런다임이 아니고 그 이전단계에서 실행되기 떄문이다.** </br>
자바스크립트는 소스코드의 평가 과정을 먼저하기 때문이다. 평가 과정에서 변수뿐 아니라 모든 선언문(변수, 함수등)을 소스코드에서 찾아 먼저 실행한다. 그리고 평가 과정이 끝나면 변수 선언을 포함한 모든 선언문을 제외한 소스코드를 한줄식 실행한다. 변수의 선언이 소스코드의 어디에 있든 상관없이 다른 코드보다 먼저 실행해 선언이 어디에 위치하는지 상관없이 어디서든 참조할 수 있다.</br>
이처럼 ***변수 선언문이 코드의 선두로 끌어 올려긴 것처럼 동작하는 자바스크립트 고유의 특징을 변수 호이스팅이라 한다.*** 
## 4-5. 값의 할당
변수에 값을 할당(대입, 저장)할 때는, 할당 연산자 =를 사용한다.
```js
var score
score = 80

// 또는,
var score = 80
```
자바스크립트 엔진은 어떻게 쓰든 두개로 나누어 실행한다. **변수 선언은 소스코드가 순차적으로 실행되는 시점인 런타임 이전에 먼저 실행되지만, 값의 할당은 소스코드가 순차적으로 실행되는 시점인 런타임에서 실행된다.**
```js
console.log(score) // undefined

var score // 변수 선언
score = 80 // 값의 할당

console.log(score) // 80
```
변수선언은 런타임 이전에 실행되고 값의 할당은 런타임에 실행된다. 따라서 undefined로 초기화 되있는 상태에서 score 값을 할당하면 새로운 값인 80으로 변경되게 된다.
```js
console.log(score)

var score = 80
console.log(score)
```
한줄로 표현하더라도 위와같이 2개의 문으로 나눠 실행된다. 80이 할당 될떄는 undefined를 지우고 그 메모리 공간에 80을 새롭게 저장하는 것이 아니라, 새로운 메모리 공간을 확보하고 그곳에 80을 할당한다. ~~그럼 메모리가 비효율적 아닌가....?~~
## 4-6. 값의 재할당
재할당이란 이미 값이 할당되어 있는 변수에 새로운 값을 또다시 할당하는 것을 말한다.
```js
var score = 80
score = 90
```
var로 선언한 변수는 값을 재할당 할 수 있다. 현재 변수에 저장된 값을 버리고 새로운 값을 저장하는 것이다. **값을 재할당할 수 없어서 변수에 저장된 값을 변경할 수 없다면 변수가 아니라 상수라 한다.** ~~변수는 참조를 하는것이라 값을 저장하는게 맞나....? 저장된 값을 다른값으로 변경하는게 아니라 저장된 주소를 다른 주소로 바꾸는게 아닌가....?~~</br>
재할당 할때 처음 값인 80을 메모리 공간에서 지우고 그 메모리 공간에 재할당 값 90을 새롭게 저장하는 것이 아니라 새로운 메모리 공간을 확보하고 그 메모리 공간에 숫자 값 90을 저장한다.</br>
처음 변수를 선언하고 할당된 undefined와 이수 재할당된 80은 더이상 참조되지 않는다. 이러한 불필요한 값들은 가비지 콜렉터에 의해 메모리에서 헤제된다. 하지만 언제 헤제될지는 모른다. 
## 4-7. 식별자 네이밍 규칙
1. 식별자는 특수문자를 제외한 문자, 숫자, 언더스코어, 달러 기호를 포함할 수 있다.
2. 단, 식별자는 특수 문자를 제외한 문자, 언더스코어, 달러기호로 시작해야 한다.
3. 예약어는 식별자로 사용할 수 없다.

식별자는 위에 규칙을 따라야 한다. 변수명도 식별자이므로 위의 규칙을 따라야 한다. 
```js
var person, $elem, _name, first_name, val1
```
변수는 ,를 사용해 한번에 여러개를 선언할 수 있다. es5부터 식별자를 만들때 유니코드를 사용하므로 알파벳 외에 한글이나 일본어 식별자도 사용할 수 있다. 
```js
var firstName // 카멜 케이스

var first_name // 스네이크 케이스

var FirstName // 파스칼 케이스

var strFirstName // type+ifentifier
var $elem = document.getElementById("myId") // Dom 노드
var osbervable$ = fromEvent(document, "click") //  RxJS 옵저버블
```
자바 스크립트는 일반적으로 변수나 함수에 카멜케이스를 사용하고, 함수와 클래스 이름에는 파스칼 케이스를 사용한다. 